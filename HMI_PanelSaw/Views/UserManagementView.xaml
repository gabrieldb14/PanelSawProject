<UserControl x:Class="HMI_PanelSaw.Views.UserManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#FF9F9F9F">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Grid.Row="0" Text="User Management" FontSize="24" FontWeight="Bold" 
                   Foreground="#333" Margin="0,0,0,20" HorizontalAlignment="Center"/>

        <!-- Search and Controls -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Text="Search:" FontSize="16" VerticalAlignment="Center" 
                       Margin="0,0,10,0"/>
            <TextBox Grid.Column="1" x:Name="txtSearch" Height="30" FontSize="14" 
                     TextChanged="TxtSearch_TextChanged" 
                     ToolTip="Search by username"/>

            <Button Grid.Column="3" x:Name="btnRefresh" Content="Refresh" Width="80" Height="30" 
                    Click="BtnRefresh_Click" FontSize="14" Margin="10,0,0,0"/>
        </Grid>

        <!-- Users DataGrid -->
        <DataGrid Grid.Row="2" x:Name="dgUsers" AutoGenerateColumns="False" 
                  CanUserAddRows="False" CanUserDeleteRows="False" 
                  SelectionMode="Single" GridLinesVisibility="All"
                  AlternatingRowBackground="#F5F5F5" RowHeight="35">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Username" Binding="{Binding Username}" 
                                    Width="150" IsReadOnly="True"/>
                <DataGridTextColumn Header="Role" Binding="{Binding Role}" 
                                    Width="120" IsReadOnly="True"/>
                <DataGridTextColumn Header="Created" Binding="{Binding CreatedAt, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}" 
                                    Width="140" IsReadOnly="True"/>
                <DataGridTextColumn Header="Last Login" Binding="{Binding LastLoginAt, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}" 
                                    Width="140" IsReadOnly="True"/>
                <DataGridTextColumn Header="Failed Attempts" Binding="{Binding FailedLoginAttempts}" 
                                    Width="100" IsReadOnly="True"/>
                <DataGridCheckBoxColumn Header="Force Password Change" Binding="{Binding ForcePasswordChange}" 
                                        Width="140" IsReadOnly="True"/>
                <DataGridTextColumn Header="Account Status" Binding="{Binding IsActive}" 
                                    Width="100" IsReadOnly="True"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center" 
                    Margin="0,20,0,0">
            <Button x:Name="btnAddUser" Content="Add User" Width="100" Height="40" 
                    Margin="5" Click="BtnAddUser_Click" FontSize="14"/>
            <Button x:Name="btnEditUser" Content="Edit User" Width="100" Height="40" 
                    Margin="5" Click="BtnEditUser_Click" FontSize="14"/>
            <Button x:Name="btnChangePassword" Content="Force Password Change" Width="150" Height="40" 
                    Margin="5" Click="BtnChangePassword_Click" FontSize="14"/>
            <Button x:Name="btnResetLockout" Content="Reset Lockout" Width="100" Height="40" 
                    Margin="5" Click="BtnResetLockout_Click" FontSize="14"/>
            <Button x:Name="btnDeleteUser" Content="Delete User" Width="100" Height="40" 
                    Margin="5" Click="BtnDeleteUser_Click" FontSize="14" 
                    Background="#FFE57373"/>
        </StackPanel>
    </Grid>
</UserControl>